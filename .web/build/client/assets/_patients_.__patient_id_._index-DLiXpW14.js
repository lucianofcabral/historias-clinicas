import{r as e}from"./rolldown-runtime-Du9yNBBJ.js";import{t}from"./react-D-S4PNWu.js";import"./react-dom-BAvWFNEm.js";import{A as n}from"./chunk-NISHYRIK-BBtCEOxO.js";import{C as r,D as i,E as a,F as o,G as s,K as c,L as l,M as u,O as d,T as f,U as p,_ as m,a as h,b as g,c as _,g as v,h as ee,i as y,j as b,k as x,l as S,m as C,o as w,p as te,q as T,r as ne,s as E,w as D,x as O,y as k}from"./esm-k38bMSib.js";import"./reflex-env-DLSvpiQy.js";import{n as A}from"./emotion-react.browser.esm-DwqSmYCO.js";import"./createLucideIcon-Bc7lyNOf.js";import{t as j}from"./activity-DzCDYWY8.js";import{t as M}from"./arrow-left-CPg6xrKT.js";import{t as N}from"./calendar-Xt3ZNEZo.js";import{t as P}from"./circle-alert-Cp4GX2NT.js";import{t as F}from"./download-CjzWq966.js";import{t as I}from"./eye-BmJEonL3.js";import{t as L}from"./file-spreadsheet-t6_7rcNf.js";import{t as R}from"./file-text-BATxXdcz.js";import{t as z}from"./file-DHaEkSIB.js";import{t as B}from"./files-7qwXExQW.js";import{t as V}from"./folder-open-DlRm-7dw.js";import{t as H}from"./hard-drive-CD4d3Yw0.js";import{t as U}from"./image-wi-psqgY.js";import{t as W}from"./mail-CtQlf69v.js";import{t as G}from"./map-pin-bYTylCtw.js";import{t as K}from"./paperclip-DKPJLgaj.js";import{t as q}from"./phone-CvWMZrfx.js";import{t as J}from"./upload-Bq_KveA6.js";import{t as Y}from"./users-Zz7bBy1b.js";import{t as X}from"./x-DrxNb3NW.js";import{t as Z}from"./lib-2qaPigRk.js";import{t as re}from"./es-B6gSIZfC.js";var Q=e(t()),ie=e(Z());function ae(){let[e,t]=(0,Q.useContext)(o);return A(f,{onClick:(0,Q.useCallback)(t=>e([p(`_call_script`,{javascript_code:`window.history.back()`,callback:null},{})],[t],{}),[e,p]),size:`2`,variant:`soft`},A(M,{size:18}),`Volver`)}function oe(){let[e,t]=(0,Q.useContext)(o);return A(f,{color:`red`,onClick:(0,Q.useCallback)(t=>e([p(`reflex___state____state.app___state___patient_detail_state____patient_detail_state.export_patient_pdf`,{},{})],[t],{}),[e,p]),size:`2`,variant:`outline`},A(R,{size:18}),`Exportar PDF`)}function se(){let[e,t]=(0,Q.useContext)(o);return A(f,{color:`green`,onClick:(0,Q.useCallback)(t=>e([p(`reflex___state____state.app___state___patient_detail_state____patient_detail_state.export_patient_excel`,{},{})],[t],{}),[e,p]),size:`2`,variant:`outline`},A(L,{size:18}),`Exportar Excel`)}function ce(){return A(u,{size:`7`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_full_name_rx_state_)}function le(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state);return A(x,{color:e.patient_rx_state_?.is_active?`green`:`gray`},e.patient_rx_state_?.is_active?`Activo`:`Inactivo`)}function ue(){return A(b,{as:`p`,size:`3`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.dni)}function de(){return A(b,{as:`p`,size:`3`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_age_rx_state_+` años`)}function fe(){return A(b,{as:`p`,size:`3`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_birth_date_str_rx_state_)}function pe(){return A(b,{as:`p`,size:`3`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.gender?.valueOf?.()===`M`?.valueOf?.()?`Masculino`:`Femenino`)}function me(){return A(b,{as:`p`,size:`3`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.blood_type)}function he(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.blood_type)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`Grupo Sanguíneo`),A(me,{}))):A(Q.Fragment,{},A(d,{})))}function ge(){return A(b,{as:`p`,size:`3`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.phone)}function _e(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.phone)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(q,{css:{color:`#3B82F6`},size:18}),A(ge,{}))):A(Q.Fragment,{},A(d,{})))}function ve(){return A(b,{as:`p`,size:`3`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.email)}function ye(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.email)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(W,{css:{color:`#3B82F6`},size:18}),A(ve,{}))):A(Q.Fragment,{},A(d,{})))}function be(){return A(b,{as:`p`,size:`3`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.address)}function xe(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.address)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(G,{css:{color:`#3B82F6`},size:18}),A(be,{}))):A(Q.Fragment,{},A(d,{})))}function Se(){return A(Q.Fragment,{},s((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_)?A(Q.Fragment,{},A(O,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`4`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(ce,{}),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(le,{})),A(g,{columns:`5`,css:{width:`100%`},gap:`4`},A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`DNI`),A(ue,{})),A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`Edad`),A(de,{})),A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`Fecha de Nacimiento`),A(fe,{})),A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`Género`),A(pe,{})),A(he,{})),A(y,{size:`4`}),A(g,{columns:`3`,css:{width:`100%`},gap:`4`},A(_e,{}),A(ye,{}),A(xe,{}))))):A(Q.Fragment,{},A(d,{})))}function Ce(){return A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.allergies)}function we(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.allergies)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`1`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(P,{css:{color:`red`},size:18}),A(b,{as:`p`,size:`3`,weight:`bold`},`Alergias`)),A(Ce,{}))):A(Q.Fragment,{},A(d,{})))}function Te(){return A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.chronic_conditions)}function Ee(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.chronic_conditions)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`1`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(j,{css:{color:`#3B82F6`},size:18}),A(b,{as:`p`,size:`3`,weight:`bold`},`Condiciones Crónicas`)),A(Te,{}))):A(Q.Fragment,{},A(d,{})))}function De(){return A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.family_history)}function Oe(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.family_history)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`1`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(Y,{css:{color:`#3B82F6`},size:18}),A(b,{as:`p`,size:`3`,weight:`bold`},`Antecedentes Familiares`)),A(De,{}))):A(Q.Fragment,{},A(d,{})))}function ke(){return A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.notes)}function Ae(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).patient_rx_state_?.notes)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`1`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(R,{css:{color:`#3B82F6`},size:18}),A(b,{as:`p`,size:`3`,weight:`bold`},`Notas`)),A(ke,{}))):A(Q.Fragment,{},A(d,{})))}function je(){return A(b,{as:`p`,css:{color:`#3B82F6`},size:`4`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).total_consultations_rx_state_)}function Me(){return A(b,{as:`p`,css:{color:`#3B82F6`},size:`4`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).total_studies_rx_state_)}function Ne(){return A(b,{as:`p`,size:`3`,weight:`bold`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).last_consultation_date_rx_state_)}function Pe(){return A(Q.Fragment,{},c((0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).last_consultation_date_rx_state_)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(b,{as:`p`,size:`3`},`Última Consulta:`),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(Ne,{}))):A(Q.Fragment,{},A(d,{})))}function Fe(){return A(x,{color:`blue`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).consultations_rx_state_.length+` consultas`)}function Ie(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state);return A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},Array.prototype.map.call(e.consultations_rx_state_??[],(e,t)=>A(O,{key:t,variant:`surface`},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`2`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(N,{css:{color:`#3B82F6`},size:16}),A(b,{as:`p`,size:`2`,weight:`bold`},e?.consultation_date),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(x,{color:`blue`,variant:`soft`},e?.reason)),A(Q.Fragment,{},c(e?.diagnosis)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`1`},A(b,{as:`p`,size:`2`,weight:`bold`},`Diagnóstico:`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},e?.diagnosis))):A(Q.Fragment,{},A(d,{}))),A(Q.Fragment,{},c(e?.treatment)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`1`},A(b,{as:`p`,size:`2`,weight:`bold`},`Tratamiento:`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},e?.treatment))):A(Q.Fragment,{},A(d,{}))),A(Q.Fragment,{},e?.has_vital_signs?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`,wrap:`wrap`},A(Q.Fragment,{},c(e?.blood_pressure)?A(Q.Fragment,{},A(x,{color:`red`,variant:`soft`},`PA: `+e?.blood_pressure)):A(Q.Fragment,{},A(d,{}))),A(Q.Fragment,{},c(e?.temperature)?A(Q.Fragment,{},A(x,{color:`orange`,variant:`soft`},`T: `+e?.temperature+`°C`)):A(Q.Fragment,{},A(d,{}))),A(Q.Fragment,{},c(e?.bmi)?A(Q.Fragment,{},A(x,{color:`green`,variant:`soft`},`IMC: `+e?.bmi)):A(Q.Fragment,{},A(d,{}))))):A(Q.Fragment,{},A(d,{})))))))}function Le(){return A(Q.Fragment,{},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).consultations_rx_state_.length>0?A(Q.Fragment,{},A(Ie,{})):A(Q.Fragment,{},A(b,{as:`p`,css:{color:`#94A3B8`},size:`3`},`No hay consultas registradas`)))}function Re(){return A(x,{color:`purple`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).studies_rx_state_.length+` estudios`)}function ze(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state),[t,n]=(0,Q.useContext)(o);return A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},Array.prototype.map.call(e.studies_rx_state_??[],(e,n)=>A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,key:n,gap:`2`},A(O,{variant:`surface`},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`2`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(R,{css:{color:`#3B82F6`},size:16}),A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,size:`3`,weight:`bold`},e?.study_name),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},e?.study_date)),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(x,{color:`purple`,variant:`soft`},e?.study_type),A(Q.Fragment,{},s(e?.file_name)?A(Q.Fragment,{},A(f,{color:`green`,onClick:n=>t([p(`reflex___state____state.app___state___patient_detail_state____patient_detail_state.download_study_file`,{study_id:e?.id},{})],[n],{}),size:`2`,variant:`soft`},A(F,{size:16}),`Descargar archivo`)):A(Q.Fragment,{},A(d,{})))),A(Q.Fragment,{},c(e?.results)?A(Q.Fragment,{},A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},e?.results)):A(Q.Fragment,{},A(d,{}))),A(Q.Fragment,{},s(e?.file_name)?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(K,{css:{color:`#3B82F6`},size:14}),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},e?.file_name),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`•`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},c(e?.file_size)?JSON.stringify(e?.file_size/1024)+` KB`:`Tamaño desconocido`))):A(Q.Fragment,{},A(d,{}))))),A(Q.Fragment,{},(s(e?.file_path)||s(e?.file_name)?[[e?.file_name,e?.file_path,e?.file_type,e?.file_size]]:[]).length>0?A(Q.Fragment,{},A(O,{css:{background:`#fbfbff`}},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`2`},A(b,{as:`p`,size:`2`,weight:`bold`},`Archivos adjuntos`),A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},Array.prototype.map.call(s(e?.file_path)||s(e?.file_name)?[[e?.file_name,e?.file_path,e?.file_type,e?.file_size]]:[],(n,r)=>A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,key:r,gap:`3`},A(K,{css:{color:`#3B82F6`},size:18}),A(i,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`0`},A(b,{as:`p`,weight:`bold`},n?.at?.(0)),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},c(n?.at?.(3))?JSON.stringify(n?.at?.(3))+` bytes`:``)),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(Q.Fragment,{},s(n?.at?.(1))?A(Q.Fragment,{},A(f,{onClick:e=>t([p(`_call_script`,{javascript_code:`window.open('a_rx_state_?.at?.(1)', '_blank')`,callback:null},{})],[e],{}),size:`1`,variant:`soft`},A(I,{size:14}),`Vista previa`)):A(Q.Fragment,{},A(d,{}))),A(f,{color:`green`,onClick:n=>t([p(`reflex___state____state.app___state___patient_detail_state____patient_detail_state.download_study_file`,{study_id:e?.id},{})],[n],{}),size:`1`,variant:`ghost`},A(F,{size:14}),`Descargar`)))))))):A(Q.Fragment,{},A(d,{}))))))}function Be(){return A(Q.Fragment,{},(0,Q.useContext)(l.reflex___state____state__app___state___patient_detail_state____patient_detail_state).studies_rx_state_.length>0?A(Q.Fragment,{},A(ze,{})):A(Q.Fragment,{},A(b,{as:`p`,css:{color:`#94A3B8`},size:`3`},`No hay estudios médicos registrados`)))}function Ve(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state);return A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`1`},A(B,{size:14}),JSON.stringify(e.total_files_rx_state_)+` archivos`)}function He(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state);return A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`1`},A(H,{size:14}),JSON.stringify(e.total_size_mb_rx_state_)+` MB`)}function Ue(){let[e,t]=(0,Q.useContext)(o);return A(f,{onClick:(0,Q.useCallback)(t=>e([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.open_upload_modal`,{},{})],[t],{}),[e,p]),size:`2`},A(J,{size:16}),`Subir Archivos`)}function We(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state);return A(x,{color:e.selected_category_rx_state_?.valueOf?.()===`all`?.valueOf?.()?`blue`:`gray`,variant:`soft`},JSON.stringify(e.total_files_rx_state_))}function Ge(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o),r=(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.set_category_filter`,{category:`all`},{})],[e],{}),[t,p]);return A(f,{color:e.selected_category_rx_state_?.valueOf?.()===`all`?.valueOf?.()?`blue`:`gray`,onClick:r,size:`2`,variant:e.selected_category_rx_state_?.valueOf?.()===`all`?.valueOf?.()?`solid`:`soft`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(b,{as:`p`,size:`2`,weight:`medium`},`Todos`),A(We,{})))}function Ke(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state);return A(x,{color:e.selected_category_rx_state_?.valueOf?.()===`patient`?.valueOf?.()?`blue`:`gray`,variant:`soft`},JSON.stringify(e.patient_files_rx_state_.length))}function qe(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o),r=(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.set_category_filter`,{category:`patient`},{})],[e],{}),[t,p]);return A(f,{color:e.selected_category_rx_state_?.valueOf?.()===`patient`?.valueOf?.()?`blue`:`gray`,onClick:r,size:`2`,variant:e.selected_category_rx_state_?.valueOf?.()===`patient`?.valueOf?.()?`solid`:`soft`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(b,{as:`p`,size:`2`,weight:`medium`},`Documentos del Paciente`),A(Ke,{})))}function Je(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state);return A(x,{color:e.selected_category_rx_state_?.valueOf?.()===`study`?.valueOf?.()?`blue`:`gray`,variant:`soft`},JSON.stringify(e.study_files_rx_state_.length))}function Ye(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o),r=(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.set_category_filter`,{category:`study`},{})],[e],{}),[t,p]);return A(f,{color:e.selected_category_rx_state_?.valueOf?.()===`study`?.valueOf?.()?`blue`:`gray`,onClick:r,size:`2`,variant:e.selected_category_rx_state_?.valueOf?.()===`study`?.valueOf?.()?`solid`:`soft`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(b,{as:`p`,size:`2`,weight:`medium`},`Estudios Médicos`),A(Je,{})))}function Xe(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state);return A(x,{color:e.selected_category_rx_state_?.valueOf?.()===`consultation`?.valueOf?.()?`blue`:`gray`,variant:`soft`},JSON.stringify(e.consultation_files_rx_state_.length))}function Ze(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o),r=(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.set_category_filter`,{category:`consultation`},{})],[e],{}),[t,p]);return A(f,{color:e.selected_category_rx_state_?.valueOf?.()===`consultation`?.valueOf?.()?`blue`:`gray`,onClick:r,size:`2`,variant:e.selected_category_rx_state_?.valueOf?.()===`consultation`?.valueOf?.()?`solid`:`soft`},A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(b,{as:`p`,size:`2`,weight:`medium`},`Consultas`),A(Xe,{})))}function Qe(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o);return A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},Array.prototype.map.call(e.filtered_files_rx_state_??[],(e,n)=>A(d,{css:{padding:`4`,borderRadius:`8px`,border:`1px solid #334155`,background:`#1E293B`,width:`100%`,"&:hover":{background:`#334155`,borderColor:`#3B82F6`}},key:n},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(Q.Fragment,{},e?.file_type.includes(`pdf`)?A(Q.Fragment,{},A(R,{css:{color:`#EF4444`},size:20})):A(Q.Fragment,{},e?.file_type.includes(`image`)?A(Q.Fragment,{},A(U,{css:{color:`#22C55E`},size:20})):A(Q.Fragment,{},e?.file_type.includes(`word`)||e?.file_type.includes(`document`)?A(Q.Fragment,{},A(R,{css:{color:`#06B6D4`},size:20})):A(Q.Fragment,{},A(z,{css:{color:`#94A3B8`},size:20}))))),A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,css:{color:`#F1F5F9`},size:`3`,weight:`medium`},e?.file_name),A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},e?.source_name),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`•`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},JSON.stringify(e?.file_size/1024)+` KB`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`•`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},e?.uploaded_at)),A(Q.Fragment,{},s(e?.description)?A(Q.Fragment,{},A(b,{as:`p`,css:{color:`#94A3B8`,fontStyle:`italic`},size:`2`},e?.description)):A(Q.Fragment,{},A(d,{})))),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(f,{color:`blue`,onClick:n=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.download_file`,{file_id:e?.file_id,category:e?.category},{})],[n],{}),size:`2`,variant:`soft`},A(F,{size:16}),`Descargar`)))))}function $e(){return A(Q.Fragment,{},(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state).total_files_rx_state_>0?A(Q.Fragment,{},A(Qe,{})):A(Q.Fragment,{},A(i,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,padding:`8`}},A(i,{align:`center`,className:`rx-Stack`,direction:`column`,gap:`3`},A(V,{css:{color:`#94A3B8`},size:48}),A(b,{as:`p`,css:{color:`#94A3B8`},size:`4`,weight:`medium`},`No hay archivos adjuntos`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`2`},`Los archivos subidos aparecerán aquí organizados por categoría`)))))}function et(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o);return A(h,{onValueChange:(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.set_upload_category`,{value:e},{})],[e],{}),[t,p]),value:e.upload_category_rx_state_},A(E,{}),A(w,{},A(S,{},``,A(_,{value:`Documento`},`Documento`),A(_,{value:`Imagen`},`Imagen`),A(_,{value:`Resultado de Laboratorio`},`Resultado de Laboratorio`),A(_,{value:`Receta`},`Receta`),A(_,{value:`Obra Social/Seguro`},`Obra Social/Seguro`),A(_,{value:`Consentimiento`},`Consentimiento`),A(_,{value:`Otro`},`Otro`))))}function tt(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o);return A(ie.default,{debounceTimeout:300,element:ne,onChange:(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.set_upload_description`,{value:e?.target?.value},{})],[e],{}),[t,p]),placeholder:`Descripción del archivo...`,rows:`3`,value:e.upload_description_rx_state_})}function $(){let e=(0,Q.useRef)(null);T.ref_upload_patient_file=e;let[t,n]=(0,Q.useContext)(o),r=(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.handle_upload`,{files:e,upload_id:`upload_patient_file`,extra_headers:{}},{},`uploadFiles`)],[e],{}),[t,p]),a=(0,Q.useCallback)(e=>t([p(`_call_function`,{function:()=>T.__toast?.error(``,{title:`Files not Accepted`,description:e.map(e=>e?.file?.path+`: `+e?.errors.map(e=>e?.message).join(`, `)).join(`

`),closeButton:!0,style:{whiteSpace:`pre-line`}}),callback:null},{})],[e],{}),[t,p]),{getRootProps:s,getInputProps:c,isDragActive:l}=re({multiple:!0,accept:{"application/pdf":[`.pdf`],"image/*":[`.png`,`.jpg`,`.jpeg`],"application/msword":[`.doc`,`.docx`]},maxFiles:10,maxSize:52428800,onDrop:r,id:`upload_patient_file`,onDropRejected:a});return A(Q.Fragment,{},A(d,{className:`rx-Upload`,css:{border:`1px dashed var(--accent-12)`,padding:`5em`,textAlign:`center`},id:`upload_patient_file`,ref:e,...s()},A(`input`,{type:`file`,...c()}),A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`2`},A(f,{color:`blue`,variant:`soft`},A(J,{size:20}),`Seleccionar Archivos`),A(b,{as:`p`,css:{color:`#94A3B8`},size:`1`},`PDF, imágenes, documentos (máx 50MB por archivo)`))))}function nt(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o);return A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`2`},A(b,{as:`p`,size:`2`,weight:`bold`},`Archivos listos para subir:`),Array.prototype.map.call(e.uploaded_files_rx_state_??[],(e,n)=>A(O,{key:n,size:`1`,variant:`surface`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(K,{css:{color:`#3B82F6`},size:18}),A(i,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`1`},A(b,{as:`p`,size:`2`,weight:`bold`},e?.name),A(b,{as:`p`,css:{color:`#94A3B8`},size:`1`},e?.type)),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(f,{color:`red`,onClick:e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.remove_uploaded_file`,{index:n},{})],[e],{}),size:`1`,variant:`ghost`},A(X,{size:16}))))))}function rt(){return A(Q.Fragment,{},(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state).uploaded_files_rx_state_.length>0?A(Q.Fragment,{},A(nt,{})):A(Q.Fragment,{}))}function it(){return A(D,{},(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state).upload_message_rx_state_)}function at(){return A(r,{color:(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state).upload_message_type_rx_state_?.valueOf?.()===`success`?.valueOf?.()?`green`:`red`,size:`2`},A(Q.Fragment,{}),A(it,{}))}function ot(){return A(Q.Fragment,{},(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state).upload_message_rx_state_?.valueOf?.()===``?.valueOf?.()?A(Q.Fragment,{},A(d,{})):A(Q.Fragment,{},A(at,{})))}function st(){return A(b,{as:`p`,size:`2`,weight:`medium`},(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state).upload_progress_rx_state_)}function ct(){return A(Q.Fragment,{},(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state).is_uploading_rx_state_?A(Q.Fragment,{},A(i,{align:`start`,className:`rx-Stack`,css:{padding:`1rem`,background:`#1E293B`,borderRadius:`0.5rem`,width:`100%`},direction:`column`,gap:`3`},A(i,{align:`center`,className:`rx-Stack`,direction:`row`,gap:`3`},A(a,{size:`3`}),A(st,{})))):A(Q.Fragment,{}))}function lt(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o),r=(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.save_uploaded_files`,{},{})],[e],{}),[t,p]);return A(f,{disabled:e.uploaded_files_rx_state_.length?.valueOf?.()===0?.valueOf?.()||e.is_uploading_rx_state_,loading:e.is_uploading_rx_state_,onClick:r},A(J,{size:16}),`Subir Archivos`)}function ut(){let e=(0,Q.useContext)(l.reflex___state____state__app___state___patient_files_state____patient_files_state),[t,n]=(0,Q.useContext)(o);return A(m,{onOpenChange:(0,Q.useCallback)(e=>t([p(`reflex___state____state.app___state___patient_files_state____patient_files_state.close_upload_modal`,{},{})],[e],{}),[t,p]),open:e.show_upload_modal_rx_state_},A(v,{css:{maxWidth:`600px`,background:`#0F172A`}},A(C,{},`Subir Archivos del Paciente`),A(ee,{css:{marginBottom:`1rem`}},`Sube uno o varios archivos relacionados con el paciente`),A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},A(b,{as:`p`,size:`2`,weight:`bold`},`Categoría *`),A(et,{}),A(b,{as:`p`,size:`2`,weight:`bold`},`Descripción (opcional)`),A(tt,{}),A(b,{as:`p`,size:`2`,weight:`bold`},`Archivos *`),A($,{}),A(rt,{}),A(ot,{})),A(ct,{}),A(i,{css:{marginTop:`1rem`},justify:`end`,gap:`3`},A(te,{},A(f,{color:`gray`,variant:`soft`},`Cancelar`)),A(lt,{}))))}function dt(){(0,Q.useEffect)(()=>(((...t)=>e([p(`reflex___state____state.app___state___patient_detail_state____patient_detail_state.load_patient_detail`,{},{})],t,{}))(),()=>{}),[]);let[e,t]=(0,Q.useContext)(o);return A(d,{css:{background:`#0F172A`,minHeight:`100vh`}},A(k,{css:{padding:`16px`},size:`4`},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`,paddingTop:`2rem`,paddingBottom:`2rem`},direction:`column`,gap:`4`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(ae,{}),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(oe,{}),A(se,{})),A(Se,{}),A(g,{columns:`2`,css:{width:`100%`},gap:`4`},A(O,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},A(u,{size:`5`},`Información Médica`),A(we,{}),A(Ee,{}),A(Oe,{}),A(Ae,{}))),A(O,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},A(u,{size:`5`},`Estadísticas`),A(y,{size:`4`}),A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(b,{as:`p`,size:`3`},`Total Consultas:`),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(je,{})),A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(b,{as:`p`,size:`3`},`Total Estudios:`),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(Me,{})),A(Pe,{}))))),A(g,{columns:`1`,css:{width:`100%`},gap:`4`},A(O,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(u,{size:`5`},`Historial de Consultas`),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(Fe,{})),A(y,{size:`4`}),A(Le,{}))),A(O,{},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(u,{size:`5`},`Estudios Médicos`),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(Re,{})),A(y,{size:`4`}),A(Be,{})))),A(d,{css:{padding:`6`,borderRadius:`12px`,border:`1px solid #334155`,background:`#1E293B`,width:`100%`}},A(i,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`4`},A(i,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,gap:`3`},A(u,{css:{color:`#F1F5F9`},size:`6`},`📎 Archivos Adjuntos`),A(i,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`},A(x,{color:`blue`,variant:`soft`},A(Ve,{})),A(x,{color:`green`,variant:`soft`},A(He,{})),A(Ue,{}))),A(i,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`2`,wrap:`wrap`},A(Ge,{}),A(qe,{}),A(Ye,{}),A(Ze,{})),A($e,{}))),A(ut,{}))))}var ft=n(function(){return A(Q.Fragment,{},A(dt,{}),A(`title`,{},`Detalle Paciente - Historias Clínicas`),A(`meta`,{content:`favicon.ico`,property:`og:image`}))});export{ft as default};